<!DOCTYPE html>
<html>
  <head><title>getUserMedia</title></head>
  <body>
    <video autoplay></video>
    <script type="text/javascript" src="pusher.js"></script>

    <script>
      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
      var constraints = { audio: false, video: true };
      var video = document.querySelector("video");
      function successCallback(stream) {
        video.src = window.URL.createObjectURL(stream);
      }
      function errorCallback(error){
        console.log("getUserMedia error: ", error);
      }
      navigator.getUserMedia(constraints, successCallback, errorCallback);

      var currentUser = {
        name: 'Tommy',
        id: 42
      };

      var pusher = new Pusher('5e613cf066db77ef9bd6', { 
        authEndpoint: 'message.php',
        cluster: "eu"
        auth: {
          params: currentUser
        }
      });

      var channel = pusher.subscribe('presence-chat');

      channel.bind('pusher:subscription_succeeded', function() {
        console.log('Channel members:', channel.members);
      });
    </script>
  </body>
</html>